{% ckan_extends %}


{% set keyresearchers_available = h.organizations_keyresearcher_available(data.group_id) %}
{% set organizations_milestones_available = h.organizations_milestones_available() %}


{% block package_metadata_fields %}
  
<div class="form-group">
    <label for="field-keyresearcher" class="control-label">{{ _('Key Researcher') }}</label>
    <div class="controls">
        <div class="row">
            <div class="col-md-12">
                <select id="field-keyresearcher" name="keyresearcher" class="form-control">
                    {% set existing_kr_id = data.get('keyresearcher') %}
                    {% for kr in keyresearchers_available %}
                    <option id="{{kr.group_id}}:{{kr.id}}" value="{{ kr.id }}" {% if existing_kr_id == kr.id %} selected="selected" {% endif %}>
                        {{ kr.name }} - {{kr.organisation}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
</div>

<div class="form-group">
    <div class="row">
        <div class="col-md-12">
           {# <!--{% block package_basic_fields_abstract %}
            {{ form.markdown('abstract', id='field-abstract', label=_('Project Performance Target'), placeholder=_('Abstract of the project performance target'), value=data.abstract, error=errors.abstract) }}
            {% endblock %}-->#}
            <label>Project Performance Target:</label>
            <input id="ppt" type="text" class="form-control" disabled/>
        </div>
    </div>
</div>

<div class="form-group">
    <!--{% set error = errors.program_id %}-->
    <label class="control-label" for="field-milestone">{{ _("Relevant project milestone no ") }}</label>
    <div class="controls">
        <div class="row">
            <div class="col-md-12">
           
               <select id="field-milestone" name="milestone_id" class="form-control" onchange="display_milestone_stmt()">
                    {% set empty_milestone = _('Please select the Milestone') %}
                    <option value="">{{ empty_milestone }}</option>
                    {% for ml in organizations_milestones_available %}
                    <option id="{{ml.id}}" data-mile_stmt="{{ml.m_stmt}}" data-groupid="{{ml.group_id}}" value="{{ ml.id }}">{{ ml.m_id }} - {{ ml.m_due }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
</div>

<div class="form-group">
    <label class="control-label" for="field-milestone">{{ _("Milestone statement") }}</label>
    
    <div class="row">
        <div class="col-md-12">
            <input id="mile_stmt" type="text" class="form-control" disabled/>
        </div>
    </div>
</div>

{% endblock %}